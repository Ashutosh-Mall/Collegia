<% layout('./layouts/boilerplate.ejs') -%>
<div class="container mt-4">

    <div class="card shadow p-4">
        <div class="d-flex align-items-center">
            <img src="<%= user.avatar || 'https://via.placeholder.com/120' %>" 
                 class="rounded-circle me-3" width="120" height="120">
            <div>
                <h3 class="mb-1"><%= user.username %></h3>
                <p class="text-muted mb-0"><%= user.email %></p>
            </div>
        </div>

        <hr>

        <h5>Profile Details</h5>
        <p><strong>Date of Birth:</strong> 
            <%= user.dob ? user.dob.toDateString() : 'Not added yet' %>
        </p>

        <p><strong>Phone:</strong> 
            <%= user.phone || 'Not added yet' %>
        </p>

        <p><strong>Bio:</strong> 
            <%= user.bio || 'No bio written yet.' %>
        </p>

        <a href="/profile/edit" class="btn btn-success btn-sm mt-2">Edit Profile</a>
    </div>

    <div class="mt-4">
        <h4>Your Created Events</h4>
        <% if (createdEvents.length === 0) { %>
            <p>You haven't created any events yet.</p>
        <% } else { %>
            <ul class="list-group">
                <% createdEvents.forEach(e => { %>
                    <li class="list-group-item d-flex justify-content-between">
                        <span><%= e.title %></span>
                        <a href="/events/<%= e._id %>" class="btn btn-outline-success btn-sm">
                            View
                        </a>
                    </li>
                <% }) %>
            </ul>
        <% } %>
    </div>

</div>
